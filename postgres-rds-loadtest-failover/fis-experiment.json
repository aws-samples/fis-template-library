{
  "description": "PostgreSQL RDS Load Test and Failover Experiment",
  "targets": {
    "EC2Instance": {
      "resourceType": "aws:ec2:instance",
      "resourceArns": [
        "${EC2InstanceArn}"
      ],
      "selectionMode": "ALL"
    }
  },
  "actions": {
    "RunLoadTest": {
      "actionId": "aws:ssm:send-command",
      "parameters": {
        "documentArn": "${SSMDocumentArn}",
        "documentParameters": "{\"Duration\":\"300\",\"Concurrency\":\"10\"}",
        "duration": "PT10M"
      },
      "targets": {
        "Instances": "EC2Instance"
      }
    }
  },
  "stopConditions": [
    {
      "source": "none"
    }
  ],
  "roleArn": "${FISRoleArn}",
  "tags": {
    "Name": "PostgreSQL-RDS-LoadTest-Failover"
  }
}
